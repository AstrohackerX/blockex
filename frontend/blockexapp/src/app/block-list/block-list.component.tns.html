<StackLayout>
  <SearchBar hint="Search by height, hash, kernel" [text]="searchItem" (textChange)="onTextChanged($event)"
             (submit)="onSubmit($event)" color="white" (loaded)="searchBarLoaded($event)"
             textFieldHintColor="white" class="search-bar"></SearchBar>
  <StackLayout *ngIf="!loading_status && !loading_blocks && !loading_charts">
      <SegmentedBar [items]="segBarItems" (selectedIndexChange)="onSelectedIndexChange($event)" class="m-5" ></SegmentedBar>
      <ScrollView [visibility]="selectedIndex === 0 ? 'visible' : 'collapsed'">
          <StackLayout class="block-card">
              <Label class="item-label" [text]="'Blockchain height:'"></Label>
              <Label class="item-value" [text]="status?.height" ></Label>
              <Label class="item-label" [text]="'Latest block:'"></Label>
              <Label class="item-value" [text]="status?.timestamp | date:'medium'" ></Label>
              <Label class="item-label" [text]="'Latest block difficulty:'"></Label>
              <Label class="item-value" [text]="status?.difficulty | number:'.'" ></Label>
              <Label class="item-label" [text]="'Coins in circulation (mined):'"></Label>
              <Label class="item-value" [text]="(status?.coins_in_circulation_mined | number:'.')
                + ' Beams'" ></Label>
              <Label class="item-label" [text]="'Coins in circulation (treasury):'"></Label>
              <Label class="item-value" [text]="(status?.coins_in_circulation_treasury | number:'.')
                + ' Beams'"></Label>
              <Label class="item-label" [text]="'Total coins in circulation:'"></Label>
              <Label class="item-value" [text]="(status?.total_coins_in_circulation | number:'.')
                + ' Beams'" ></Label>
              <Label class="item-label" [text]="'Next treasury emission block height:'"></Label>
              <Label class="item-value" [text]="(status?.next_treasury_emission_block_height | number:'.')"></Label>
              <Label class="item-label" [text]="'Next treasury emission coin amount:'"></Label>
              <Label class="item-value" [text]="(status?.next_treasury_emission_coin_amount | number:'.')
                + ' Beams'" ></Label>
              <Label class="item-label" [text]="'Total emission:'"></Label>
              <Label class="item-value" [text]="(status?.total_emission | number:'.') + ' Beams'" ></Label>
              <Label class="item-label" [text]="'Hashrate:'"></Label>
              <Label class="item-value" [text]="(status?.difficulty / 60 | number:'.')  + ' Sol/s'" ></Label>
          </StackLayout>
      </ScrollView>

      <GridLayout rows="*" [visibility]="selectedIndex === 1 ? 'visible' : 'collapsed'">
          <StackLayout>
              <StackLayout>
                  <Label [text]="'BLOCKS'" class="blocks-list-title"></Label>
              </StackLayout>
              <GridLayout>
                  <RadListView loadOnDemandMode="Manual"
                               (loadMoreDataRequested)="onLoadMoreItemsRequested($event)" [items]="dataItems">
                      <ng-template tkListItemTemplate let-item="item">
                          <StackLayout orientation="vertical">
                              <GridLayout class="list-group-item"
                                          (tap)="showBlockDetails(item.hash)" [class.odd]="odd" [class.even]="even">
                                  <Label [text]="item.height" android:class="label-item"></Label>
                                  <Label text="View details >" class="item-details"
                                         android:class="label-item"></Label>
                              </GridLayout>
                          </StackLayout>
                      </ng-template>
                  </RadListView>
              </GridLayout>
          </StackLayout>
      </GridLayout>

      <ScrollView orientation="vertical" [visibility]="selectedIndex === 2 ? 'visible' : 'collapsed'">
        <GridLayout rows="200, 200, 200" columns="*">
          <RadCartesianChart row="0">
              <DateTimeContinuousAxis tkCartesianHorizontalAxis majorStep="Day" dateFormat="MMM-dd"
                  labelFitMode="Rotate" labelRotationAngle="1.2"></DateTimeContinuousAxis>
              <LinearAxis tkCartesianVerticalAxis></LinearAxis>

              <LineSeries tkCartesianSeries [items]="chartsData.fee" categoryProperty="Date" valueProperty="fee"></LineSeries>
          </RadCartesianChart>
          <RadCartesianChart row="1">
              <DateTimeContinuousAxis tkCartesianHorizontalAxis majorStep="Day" dateFormat="MMM-dd"
                  labelFitMode="Rotate" labelRotationAngle="1.2"></DateTimeContinuousAxis>
              <LinearAxis tkCartesianVerticalAxis></LinearAxis>

              <LineSeries tkCartesianSeries [items]="chartsData.difficulty" categoryProperty="Date" valueProperty="difficulty"></LineSeries>
          </RadCartesianChart>
          <RadCartesianChart row="2">
              <DateTimeContinuousAxis tkCartesianHorizontalAxis plotMode="OnTicks" majorStepUnit="Hour" majorStep="100" dateFormat="MMM-dd"

                  labelFitMode="Rotate" labelRotationAngle="1.2"></DateTimeContinuousAxis>
              <LinearAxis tkCartesianVerticalAxis></LinearAxis>

              <LineSeries tkCartesianSeries [items]="chartsData.range" categoryProperty="Date" valueProperty="Blocks_per_hour"></LineSeries>
          </RadCartesianChart>
        </GridLayout>
      </ScrollView>
  </StackLayout>
</StackLayout>
<ActivityIndicator #activityIndicator [busy]="loading_status || loading_blocks || loading_charts"
                     width="150" height="150" class="activity-indicator"></ActivityIndicator>

